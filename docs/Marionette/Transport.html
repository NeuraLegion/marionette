<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.29.0">


<link href="../css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="../js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "../";
</script>

  <meta id="repository-name" content="github.com/watzon/marionette">
  <title>Marionette::Transport - github.com/watzon/marionette</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="../index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="github.com/watzon/marionette/Marionette" data-name="marionette">
      <a href="../Marionette.html">Marionette</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/watzon/marionette/Marionette/Actions" data-name="marionette::actions">
      <a href="../Marionette/Actions.html">Actions</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Actions/Action" data-name="marionette::actions::action">
      <a href="../Marionette/Actions/Action.html">Action</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Actions/ActionType" data-name="marionette::actions::actiontype">
      <a href="../Marionette/Actions/ActionType.html">ActionType</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Actions/ActionValue" data-name="marionette::actions::actionvalue">
      <a href="../Marionette/Actions/ActionValue.html">ActionValue</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Actions/MouseButton" data-name="marionette::actions::mousebutton">
      <a href="../Marionette/Actions/MouseButton.html">MouseButton</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/watzon/marionette/Marionette/Browser" data-name="marionette::browser">
      <a href="../Marionette/Browser.html">Browser</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Browser/BrowserContext" data-name="marionette::browser::browsercontext">
      <a href="../Marionette/Browser/BrowserContext.html">BrowserContext</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Browser/LocatorStrategy" data-name="marionette::browser::locatorstrategy">
      <a href="../Marionette/Browser/LocatorStrategy.html">LocatorStrategy</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Browser/ScreenshotFormat" data-name="marionette::browser::screenshotformat">
      <a href="../Marionette/Browser/ScreenshotFormat.html">ScreenshotFormat</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Browser/WindowRect" data-name="marionette::browser::windowrect">
      <a href="../Marionette/Browser/WindowRect.html">WindowRect</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Downloader" data-name="marionette::downloader">
      <a href="../Marionette/Downloader.html">Downloader</a>
      
    </li>
  
  <li class="parent " data-id="github.com/watzon/marionette/Marionette/Error" data-name="marionette::error">
      <a href="../Marionette/Error.html">Error</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Error/ExecutableNotFound" data-name="marionette::error::executablenotfound">
      <a href="../Marionette/Error/ExecutableNotFound.html">ExecutableNotFound</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Error/MaxPayloadSizeExceeded" data-name="marionette::error::maxpayloadsizeexceeded">
      <a href="../Marionette/Error/MaxPayloadSizeExceeded.html">MaxPayloadSizeExceeded</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Error/TimeoutError" data-name="marionette::error::timeouterror">
      <a href="../Marionette/Error/TimeoutError.html">TimeoutError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/HTMLElement" data-name="marionette::htmlelement">
      <a href="../Marionette/HTMLElement.html">HTMLElement</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Launcher" data-name="marionette::launcher">
      <a href="../Marionette/Launcher.html">Launcher</a>
      
    </li>
  
  <li class="parent " data-id="github.com/watzon/marionette/Marionette/Logger" data-name="marionette::logger">
      <a href="../Marionette/Logger.html">Logger</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Logger/Formatter" data-name="marionette::logger::formatter">
      <a href="../Marionette/Logger/Formatter.html">Formatter</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Message" data-name="marionette::message">
      <a href="../Marionette/Message.html">Message</a>
      
    </li>
  
  <li class=" current" data-id="github.com/watzon/marionette/Marionette/Transport" data-name="marionette::transport">
      <a href="../Marionette/Transport.html">Transport</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/marionette/Marionette/Utils" data-name="marionette::utils">
      <a href="../Marionette/Utils.html">Utils</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Marionette::Transport

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Marionette/Transport.html">Marionette::Transport</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>








  <h2>Included Modules</h2>
  <ul class="other-types-list">
  
    <li class="other-type"><a href="../Marionette/Logger.html">Marionette::Logger</a></li>
  
  </ul>










  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L5" target="_blank">
        marionette/transport.cr
      </a>
    
    <br/>
  





  <h2>Constructors</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28timeout%3D60000%29-class-method" class="signature"><strong>.new</strong>(timeout = <span class="n">60000</span>)</a>
        
          <div class="summary"><p>Creates a new Transport instance with the provided <code><a href="../Marionette/Transport.html#timeout%3AInt32-instance-method">#timeout</a></code>.</p></div>
        
      </li>
    
  </ul>





  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#connect%28address%2Cport%29-instance-method" class="signature"><strong>#connect</strong>(address, port)</a>
        
          <div class="summary"><p>Initiates a TCP connection to a running Firefox instance using the provided <code>address</code> and <code>port</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#last_id%3AInt32-instance-method" class="signature"><strong>#last_id</strong> : Int32</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#max_packet_length%3AInt32-instance-method" class="signature"><strong>#max_packet_length</strong> : Int32</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#max_packet_length%3D%28max_packet_length%3AInt32%29-instance-method" class="signature"><strong>#max_packet_length=</strong>(max_packet_length : Int32)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#min_protocol_level%3AInt32-instance-method" class="signature"><strong>#min_protocol_level</strong> : Int32</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#min_protocol_level%3D%28min_protocol_level%3AInt32%29-instance-method" class="signature"><strong>#min_protocol_level=</strong>(min_protocol_level : Int32)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#receive-instance-method" class="signature"><strong>#receive</strong></a>
        
          <div class="summary"><p>Receives a message from the browser following a command and parses it into a <code><a href="../Marionette/Message.html">Message</a></code> instance.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#receive_raw-instance-method" class="signature"><strong>#receive_raw</strong></a>
        
          <div class="summary"><p>Receives a message from the browser following a command and returns the raw string.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#request%28command%2Cparams%3Dnil%29-instance-method" class="signature"><strong>#request</strong>(command, params = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Convenience method to <code><a href="../Marionette/Transport.html#send%28command%2Cparams%3Dnil%29-instance-method">#send</a></code> a command with optional <code>params</code> and <code><a href="../Marionette/Transport.html#receive-instance-method">#receive</a></code> a <code><a href="../Marionette/Message.html">Message</a></code> response.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#send%28command%2Cparams%3Dnil%29-instance-method" class="signature"><strong>#send</strong>(command, params = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Sends a <code>command</code> to the browser with optional <code>params</code> supplied as any object that can be converted to json via <code>#to_json</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#timeout%3AInt32-instance-method" class="signature"><strong>#timeout</strong> : Int32</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from module <code><a href="../Marionette/Logger.html">Marionette::Logger</a></code></h3>
  
  
    <a href="../Marionette/Logger.html#alert%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>alert(*args, **options)<br/>alert(*args, **options, &block)</span>
    alert</a>, 
    
  
    <a href="../Marionette/Logger.html#crit%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>crit(*args, **options)<br/>crit(*args, **options, &block)</span>
    crit</a>, 
    
  
    <a href="../Marionette/Logger.html#debug%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>debug(*args, **options)<br/>debug(*args, **options, &block)</span>
    debug</a>, 
    
  
    <a href="../Marionette/Logger.html#emerg%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>emerg(*args, **options)<br/>emerg(*args, **options, &block)</span>
    emerg</a>, 
    
  
    <a href="../Marionette/Logger.html#error%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>error(*args, **options)<br/>error(*args, **options, &block)</span>
    error</a>, 
    
  
    <a href="../Marionette/Logger.html#info%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>info(*args, **options)<br/>info(*args, **options, &block)</span>
    info</a>, 
    
  
    <a href="../Marionette/Logger.html#notice%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>notice(*args, **options)<br/>notice(*args, **options, &block)</span>
    notice</a>, 
    
  
    <a href="../Marionette/Logger.html#warning%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="tooltip">
      <span>warning(*args, **options)<br/>warning(*args, **options, &block)</span>
    warning</a>
    
  


    


    

  <h3>Class methods inherited from module <code><a href="../Marionette/Logger.html">Marionette::Logger</a></code></h3>
  
  
    <a href="../Marionette/Logger.html#alert%28message%29-class-method" class="tooltip">
      <span>alert(message)</span>
    alert</a>, 
    
  
    <a href="../Marionette/Logger.html#crit%28message%29-class-method" class="tooltip">
      <span>crit(message)</span>
    crit</a>, 
    
  
    <a href="../Marionette/Logger.html#debug%28message%29-class-method" class="tooltip">
      <span>debug(message)</span>
    debug</a>, 
    
  
    <a href="../Marionette/Logger.html#emerg%28message%29-class-method" class="tooltip">
      <span>emerg(message)</span>
    emerg</a>, 
    
  
    <a href="../Marionette/Logger.html#error%28message%29-class-method" class="tooltip">
      <span>error(message)</span>
    error</a>, 
    
  
    <a href="../Marionette/Logger.html#info%28message%29-class-method" class="tooltip">
      <span>info(message)</span>
    info</a>, 
    
  
    <a href="../Marionette/Logger.html#logger-class-method" class="tooltip">
      <span>logger</span>
    logger</a>, 
    
  
    <a href="../Marionette/Logger.html#logger%3D%28logger%29-class-method" class="tooltip">
      <span>logger=(logger)</span>
    logger=</a>, 
    
  
    <a href="../Marionette/Logger.html#notice%28message%29-class-method" class="tooltip">
      <span>notice(message)</span>
    notice</a>, 
    
  
    <a href="../Marionette/Logger.html#warning%28message%29-class-method" class="tooltip">
      <span>warning(message)</span>
    warning</a>
    
  


  
    


    


    


  
    


    


    


  
</div>


  <h2>Constructor Detail</h2>
  
    <div class="entry-detail" id="new(timeout=60000)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(timeout = <span class="n">60000</span>)

        <a class="method-permalink" href="#new%28timeout%3D60000%29-class-method">#</a>
      </div>
      
        <div class="doc"><p>Creates a new Transport instance with the
provided <code><a href="../Marionette/Transport.html#timeout%3AInt32-instance-method">#timeout</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L18" target="_blank">View source</a>]
        
      </div>
    </div>
  





  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="connect(address,port)-instance-method">
      <div class="signature">
        
        def <strong>connect</strong>(address, port)

        <a class="method-permalink" href="#connect%28address%2Cport%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Initiates a TCP connection to a running Firefox instance
using the provided <code>address</code> and <code>port</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L31" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="last_id:Int32-instance-method">
      <div class="signature">
        
        def <strong>last_id</strong> : Int32

        <a class="method-permalink" href="#last_id%3AInt32-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L14" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="max_packet_length:Int32-instance-method">
      <div class="signature">
        
        def <strong>max_packet_length</strong> : Int32

        <a class="method-permalink" href="#max_packet_length%3AInt32-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L10" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="max_packet_length=(max_packet_length:Int32)-instance-method">
      <div class="signature">
        
        def <strong>max_packet_length=</strong>(max_packet_length : Int32)

        <a class="method-permalink" href="#max_packet_length%3D%28max_packet_length%3AInt32%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L14" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="min_protocol_level:Int32-instance-method">
      <div class="signature">
        
        def <strong>min_protocol_level</strong> : Int32

        <a class="method-permalink" href="#min_protocol_level%3AInt32-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L11" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="min_protocol_level=(min_protocol_level:Int32)-instance-method">
      <div class="signature">
        
        def <strong>min_protocol_level=</strong>(min_protocol_level : Int32)

        <a class="method-permalink" href="#min_protocol_level%3D%28min_protocol_level%3AInt32%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L15" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="receive-instance-method">
      <div class="signature">
        
        def <strong>receive</strong>

        <a class="method-permalink" href="#receive-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Receives a message from the browser following
a command and parses it into a <code><a href="../Marionette/Message.html">Message</a></code> instance.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L58" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="receive_raw-instance-method">
      <div class="signature">
        
        def <strong>receive_raw</strong>

        <a class="method-permalink" href="#receive_raw-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Receives a message from the browser following
a command and returns the raw string.</p>

<p><span class="flag orange">TODO</span>  Add timeout</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L67" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="request(command,params=nil)-instance-method">
      <div class="signature">
        
        def <strong>request</strong>(command, params = <span class="n">nil</span>)

        <a class="method-permalink" href="#request%28command%2Cparams%3Dnil%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Convenience method to <code><a href="../Marionette/Transport.html#send%28command%2Cparams%3Dnil%29-instance-method">#send</a></code> a command with
optional <code>params</code> and <code><a href="../Marionette/Transport.html#receive-instance-method">#receive</a></code> a <code><a href="../Marionette/Message.html">Message</a></code>
response.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L97" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="send(command,params=nil)-instance-method">
      <div class="signature">
        
        def <strong>send</strong>(command, params = <span class="n">nil</span>)

        <a class="method-permalink" href="#send%28command%2Cparams%3Dnil%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Sends a <code>command</code> to the browser with optional
<code>params</code> supplied as any object that can be
converted to json via <code>#to_json</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L85" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="timeout:Int32-instance-method">
      <div class="signature">
        
        def <strong>timeout</strong> : Int32

        <a class="method-permalink" href="#timeout%3AInt32-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/watzon/marionette/blob/defca211262cb21a79ca95e6f04027d952f6f692/src/marionette/transport.cr#L13" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
